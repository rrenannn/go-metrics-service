// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: notifications_log.sql

package db

import (
	"context"
	"database/sql"

	"github.com/google/uuid"
	"github.com/sqlc-dev/pqtype"
)

const insertNotification = `-- name: InsertNotification :exec
INSERT INTO notifications_log(notification_id, payload, status, attempts, error_text)
VALUES($1, $2, $3, $4, $5)
`

type InsertNotificationParams struct {
	NotificationID uuid.UUID             `json:"notification_id"`
	Payload        pqtype.NullRawMessage `json:"payload"`
	Status         string                `json:"status"`
	Attempts       sql.NullInt32         `json:"attempts"`
	ErrorText      sql.NullString        `json:"error_text"`
}

func (q *Queries) InsertNotification(ctx context.Context, arg InsertNotificationParams) error {
	_, err := q.db.ExecContext(ctx, insertNotification,
		arg.NotificationID,
		arg.Payload,
		arg.Status,
		arg.Attempts,
		arg.ErrorText,
	)
	return err
}

const updateStatus = `-- name: UpdateStatus :exec
UPDATE notifications_log
SET status = $2, error_text = $3, updated_at = now()
WHERE notification_id = $1
`

type UpdateStatusParams struct {
	NotificationID uuid.UUID      `json:"notification_id"`
	Status         string         `json:"status"`
	ErrorText      sql.NullString `json:"error_text"`
}

func (q *Queries) UpdateStatus(ctx context.Context, arg UpdateStatusParams) error {
	_, err := q.db.ExecContext(ctx, updateStatus, arg.NotificationID, arg.Status, arg.ErrorText)
	return err
}
